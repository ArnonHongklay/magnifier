!function(t){"use strict";var e=window.angulartics||(window.angulartics={});e.waitForVendorCount=0,e.waitForVendorApi=function(t,a,n,i,r){r||e.waitForVendorCount++,i||(i=n,n=void 0),!Object.prototype.hasOwnProperty.call(window,t)||void 0!==n&&void 0===window[t][n]?setTimeout(function(){e.waitForVendorApi(t,a,n,i,!0)},a):(e.waitForVendorCount--,i(window[t]))},t.module("angulartics",[]).provider("$analytics",function(){var a={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3},n=["pageTrack","eventTrack","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],i={},r={},s=function(t){return function(){e.waitForVendorCount&&(i[t]||(i[t]=[]),i[t].push(arguments))}},o=function(e,a){return r[e]||(r[e]=[]),r[e].push(a),function(){var a=arguments;t.forEach(r[e],function(t){t.apply(this,a)},this)}},u={settings:a},c=function(t,e){e?setTimeout(t,e):t()},g={$get:function(){return u},api:u,settings:a,virtualPageviews:function(t){this.settings.pageTracking.autoTrackVirtualPages=t},firstPageview:function(t){this.settings.pageTracking.autoTrackFirstPage=t},withBase:function(e){this.settings.pageTracking.basePath=e?t.element("base").attr("href").slice(0,-1):""},withAutoBase:function(t){this.settings.pageTracking.autoBasePath=t}},l=function(e,n){u[e]=o(e,n);var r=a[e],s=r?r.bufferFlushDelay:null,g=null!==s?s:a.bufferFlushDelay;t.forEach(i[e],function(t,e){c(function(){n.apply(this,t)},e*g)})},f=function(t){return t.replace(/^./,function(t){return t.toUpperCase()})},p=function(t){var e="register"+f(t);g[e]=function(e){l(t,e)},u[t]=o(t,s(t))};return t.forEach(n,p),g}).run(["$rootScope","$location","$window","$analytics","$injector",function(t,e,a,n,i){if(n.settings.pageTracking.autoTrackFirstPage){var r=!0;if(i.has("$route")){var s=i.get("$route");for(var o in s.routes){r=!1;break}}else if(i.has("$state")){var u=i.get("$state");for(var c in u.get()){r=!1;break}}else r=!1;if(r)if(n.settings.pageTracking.autoBasePath&&(n.settings.pageTracking.basePath=a.location.pathname),n.settings.trackRelativePath){var g=n.settings.pageTracking.basePath+e.url();n.pageTrack(g)}else n.pageTrack(e.absUrl())}n.settings.pageTracking.autoTrackVirtualPages&&(n.settings.pageTracking.autoBasePath&&(n.settings.pageTracking.basePath=a.location.pathname+"#"),i.has("$route")&&t.$on("$routeChangeSuccess",function(t,a){if(!a||!(a.$$route||a).redirectTo){var i=n.settings.pageTracking.basePath+e.url();n.pageTrack(i)}}),i.has("$state")&&t.$on("$stateChangeSuccess",function(){var t=n.settings.pageTracking.basePath+e.url();n.pageTrack(t)}))}]).directive("analyticsOn",["$analytics","$timeout",function(e){function a(t){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(t.tagName.toLowerCase()+":"+(t.type||""))>=0}function n(t){return a(t)?"click":"click"}function i(t){return a(t)?t.innerText||t.value:t.id||t.name||t.tagName}function r(t){return"analytics"===t.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(t.substr(9))}function s(t){var e=t.slice(9);return"undefined"!=typeof e&&null!==e&&e.length>0?e.substring(0,1).toLowerCase()+e.substring(1):e}return{restrict:"A",scope:!0,link:function(a,o,u){var c=u.analyticsOn||n(o[0]);a.$analytics={},t.forEach(u.$attr,function(t,e){r(e)&&u.$observe(e,function(t){a.$analytics[s(e)]=t})}),t.element(o[0]).bind(c,function(n){var r=u.analyticsEvent||i(o[0]);a.$analytics.eventType=n.type,(!u.analyticsIf||a.$eval(u.analyticsIf))&&(u.analyticsProperties&&t.extend(a.$analytics,a.$eval(u.analyticsProperties)),e.eventTrack(r,a.$analytics))})}}}])}(angular);