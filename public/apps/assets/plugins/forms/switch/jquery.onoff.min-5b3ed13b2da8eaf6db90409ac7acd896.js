!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):t.jQuery)}(this,function(t){"use strict";function e(s,i){if(!(this instanceof e))return new e(s,i);if("input"!==s.nodeName.toLowerCase()||"checkbox"!==s.type)return t.error("OnOff should be called on checkboxes");var n=t.data(s,e.datakey);return n?n:(this.options=i=t.extend({},e.defaults,i),this.elem=s,this.$elem=t(s).addClass(i.className),this.$doc=t(s.ownerDocument||document),i.namespace+=t.guid++,s.id||(s.id="onoffswitch"+a++),this.enable(),void t.data(s,e.datakey,this))}var s="over out down up move enter leave cancel".split(" "),i=t.extend({},t.event.mouseHooks),n={};if(window.PointerEvent)t.each(s,function(e,s){t.event.fixHooks[n[s]="pointer"+s]=i});else{var o=i.props;i.props=o.concat(["touches","changedTouches","targetTouches","altKey","ctrlKey","metaKey","shiftKey"]),i.filter=function(t,e){var s,i=o.length;if(!e.pageX&&e.touches&&(s=e.touches[0]))for(;i--;)t[o[i]]=s[o[i]];return t},t.each(s,function(e,s){if(2>e)n[s]="mouse"+s;else{var o="touch"+("down"===s?"start":"up"===s?"end":s);t.event.fixHooks[o]=i,n[s]=o+" mouse"+s}})}t.pointertouch=n;var a=1,h=Array.prototype.slice;return e.datakey="_onoff",e.defaults={namespace:".onoff",className:"onoffswitch-checkbox"},e.prototype={constructor:e,instance:function(){return this},wrap:function(){var e=this.elem,s=this.$elem,i=this.options,n=s.parent(".onoffswitch");n.length||(s.wrap('<div class="onoffswitch"></div>'),n=s.parent().addClass(e.className.replace(i.className,""))),this.$con=n;var o=s.next('label[for="'+e.id+'"]');o.length||(o=t("<label/>").attr("for",e.id).insertAfter(e)),this.$label=o.addClass("onoffswitch-label");var a=o.find(".onoffswitch-inner");a.length||(a=t("<div/>").addClass("onoffswitch-inner").prependTo(o)),this.$inner=a;var h=o.find(".onoffswitch-switch");h.length||(h=t("<div/>").addClass("onoffswitch-switch").appendTo(o)),this.$switch=h},_handleMove:function(t){if(!this.disabled){this.moved=!0,this.lastX=t.clientX;var e=Math.max(Math.min(this.startX-this.lastX,this.maxRight),0);this.$switch.css("right",e),this.$inner.css("marginLeft",100*-(e/this.maxRight)+"%")}},_startMove:function(e){e.preventDefault();var s,i;"pointerdown"===e.type?(s="pointermove",i="pointerup"):"touchstart"===e.type?(s="touchmove",i="touchend"):(s="mousemove",i="mouseup");var n=this.elem,o=this.$elem,a=this.options.namespace,h=this.$switch,r=h[0],c=this.$inner.add(h).css("transition","none");this.maxRight=this.$con.width()-h.width()-t.css(r,"margin-left",!0)-t.css(r,"margin-right",!0)-t.css(r,"border-left-width",!0)-t.css(r,"border-right-width",!0);var d=n.checked;this.moved=!1,this.startX=e.clientX+(d?0:this.maxRight);var f=this,l=this.$doc.on(s+a,t.proxy(this._handleMove,this)).on(i+a,function(){c.css("transition",""),l.off(a),setTimeout(function(){if(f.moved){var t=f.lastX>f.startX-f.maxRight/2;n.checked!==t&&(n.checked=t,o.trigger("change"))}f.$switch.css("right",""),f.$inner.css("marginLeft","")})})},_bind:function(){this._unbind(),this.$switch.on(t.pointertouch.down,t.proxy(this._startMove,this))},enable:function(){this.wrap(),this._bind(),this.disabled=!1},_unbind:function(){this.$doc.add(this.$switch).off(this.options.namespace)},disable:function(){this.disabled=!0,this._unbind()},unwrap:function(){this.disable(),this.$label.remove(),this.$elem.unwrap().removeClass(this.options.className)},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),t.removeData(this.elem,e.datakey)},option:function(e,s){var i,n=this.options;if(!e)return t.extend({},n);if("string"==typeof e){if(1===arguments.length)return void 0!==n[e]?n[e]:null;i={},i[e]=s}else i=e;t.each(i,t.proxy(function(t,e){switch(t){case"namespace":this._unbind();break;case"className":this.$elem.removeClass(n.className)}switch(n[t]=e,t){case"namespace":this._bind();break;case"className":this.$elem.addClass(e)}},this))}},t.fn.onoff=function(s){var i,n,o,a;return"string"==typeof s?(a=[],n=h.call(arguments,1),this.each(function(){i=t.data(this,e.datakey),i?"_"!==s.charAt(0)&&"function"==typeof(o=i[s])&&void 0!==(o=o.apply(i,n))&&a.push(o):a.push(void 0)}),a.length?1===a.length?a[0]:a:this):this.each(function(){new e(this,s)})},t.OnOff=e});