!function(t){var e={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},o=function(t){this.tipPosition={x:0,y:0},this.init(t)};o.prototype.init=function(e){var o=this;e.hooks.bindEvents.push(function(e,i){if(o.plotOptions=e.getOptions(),o.plotOptions.tooltip!==!1&&"undefined"!=typeof o.plotOptions.tooltip){o.tooltipOptions=o.plotOptions.tooltipOpts;var s=o.getDomElement();t(e.getPlaceholder()).bind("plothover",function(t,e,i){if(i){var n;n=o.stringFormat(o.tooltipOptions.content,i),s.html(n).css({left:o.tipPosition.x+o.tooltipOptions.shifts.x,top:o.tipPosition.y+o.tooltipOptions.shifts.y}).show(),"function"==typeof o.tooltipOptions.onHover&&o.tooltipOptions.onHover(i,s)}else s.hide().html("")}),i.mousemove(function(t){var e={};e.x=t.pageX,e.y=t.pageY,o.updateTooltipPosition(e)})}})},o.prototype.getDomElement=function(){var e;return t("#flotTip").length>0?e=t("#flotTip"):(e=t("<div />").attr("id","flotTip"),e.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111"})),e},o.prototype.updateTooltipPosition=function(t){this.tipPosition.x=t.x,this.tipPosition.y=t.y},o.prototype.stringFormat=function(t,e){var o=/%p\.{0,1}(\d{0,})/,i=/%s/,s=/%x\.{0,1}(\d{0,})/,n=/%y\.{0,1}(\d{0,})/;return"function"==typeof t&&(t=t(e.series.data[e.dataIndex][0],e.series.data[e.dataIndex][1])),"undefined"!=typeof e.series.percent&&(t=this.adjustValPrecision(o,t,e.series.percent)),"undefined"!=typeof e.series.label&&(t=t.replace(i,e.series.label)),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(s,this.timestampToDate(e.series.data[e.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(n,this.timestampToDate(e.series.data[e.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof e.series.data[e.dataIndex][0]&&(t=this.adjustValPrecision(s,t,e.series.data[e.dataIndex][0])),"number"==typeof e.series.data[e.dataIndex][1]&&(t=this.adjustValPrecision(n,t,e.series.data[e.dataIndex][1])),"undefined"!=typeof e.series.xaxis.tickFormatter&&(t=t.replace(s,e.series.xaxis.tickFormatter(e.series.data[e.dataIndex][0],e.series.xaxis))),"undefined"!=typeof e.series.yaxis.tickFormatter&&(t=t.replace(n,e.series.yaxis.tickFormatter(e.series.data[e.dataIndex][1],e.series.yaxis))),t},o.prototype.isTimeMode=function(t,e){return"undefined"!=typeof e.series[t].options.mode&&"time"===e.series[t].options.mode},o.prototype.isXDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},o.prototype.isYDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},o.prototype.timestampToDate=function(e,o){var i=new Date(e);return t.plot.formatDate(i,o)},o.prototype.adjustValPrecision=function(t,e,o){var i;return null!==e.match(t)&&""!==RegExp.$1&&(i=RegExp.$1,o=o.toFixed(i),e=e.replace(t,o)),e};var i=[],s=function(t){i.push(new o(t))};t.plot.plugins.push({init:s,options:e,name:"tooltip",version:"0.6"})}(jQuery);