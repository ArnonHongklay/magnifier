!function(t,s,o){var e=function(s,i){return!this instanceof e?void alert("Scroller warning: Scroller must be initialised with the 'new' keyword."):("undefined"==typeof i&&(i={}),this.s={dt:s,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,rowHeight:null,autoHeight:!0,viewportHeight:0,viewportRows:0,stateTO:null,drawTO:null},this.s=t.extend(this.s,e.oDefaults,i),this.dom={force:o.createElement("div"),scroller:null,table:null},this.s.dt.oScroller=this,void this._fnConstruct())};e.prototype={fnRowToPixels:function(t){return t*this.s.rowHeight},fnPixelsToRow:function(t){return parseInt(t/this.s.rowHeight,10)},fnScrollToRow:function(s,o){var e=this.fnRowToPixels(s);"undefined"==typeof o||o?t(this.dom.scroller).animate({scrollTop:e}):t(this.dom.scroller).scrollTop(e)},fnMeasure:function(s){this.s.autoHeight&&this._fnCalcRowHeight(),this.s.viewportHeight=t(this.dom.scroller).height(),this.s.viewportRows=parseInt(this.s.viewportHeight/this.s.rowHeight,10)+1,this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer,this.s.trace&&console.log("Row height: "+this.s.rowHeight+" Viewport height: "+this.s.viewportHeight+" Viewport rows: "+this.s.viewportRows+" Display rows: "+this.s.dt._iDisplayLength),("undefined"==typeof s||s)&&this.s.dt.oInstance.fnDraw()},_fnConstruct:function(){var s=this;this.dom.force.style.position="absolute",this.dom.force.style.top="0px",this.dom.force.style.left="0px",this.dom.force.style.width="1px",this.dom.scroller=t("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0],this.dom.scroller.appendChild(this.dom.force),this.dom.scroller.style.position="relative",this.dom.table=t(">table",this.dom.scroller)[0],this.dom.table.style.position="absolute",this.dom.table.style.top="0px",this.dom.table.style.left="0px",t(this.s.dt.nTableWrapper).addClass("DTS"),this.s.loadingIndicator&&t(this.dom.scroller.parentNode).css("position","relative").append('<div class="DTS_Loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>"),this.s.rowHeight&&"auto"!=this.s.rowHeight&&(this.s.autoHeight=!1),this.fnMeasure(!1),t(this.dom.scroller).scroll(function(){s._fnScroll.call(s)}),t(this.dom.scroller).bind("touchstart",function(){s._fnScroll.call(s)}),this.s.dt.aoDrawCallback.push({fn:function(){s.s.dt.bInitialised&&s._fnDrawCallback.call(s)},sName:"Scroller"}),this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(t,o){o.iScroller=s.dom.scroller.scrollTop},"Scroller_State")},_fnScroll:function(){var s,o=this,e=this.dom.scroller.scrollTop;if(!this.s.dt.bFiltered&&!this.s.dt.bSorted&&(this.s.trace&&console.log("Scroll: "+e+"px - boundaries: "+this.s.redrawTop+" / "+this.s.redrawBottom+".  Showing rows "+this.fnPixelsToRow(e)+" to "+this.fnPixelsToRow(e+t(this.dom.scroller).height())+" in the viewport, with rows "+this.s.dt._iDisplayStart+" to "+this.s.dt._iDisplayEnd+" rendered by the DataTable"),this._fnInfo(),clearTimeout(this.s.stateTO),this.s.stateTO=setTimeout(function(){o.s.dt.oApi._fnSaveState(o.s.dt)},250),e<this.s.redrawTop||e>this.s.redrawBottom)){var i=(this.s.displayBuffer-1)/2*this.s.viewportRows;s=parseInt(e/this.s.rowHeight,10)-i,0>s?s=0:s+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()?(s=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength,0>s&&(s=0)):s%2!==0&&s++,s!=this.s.dt._iDisplayStart&&(this.s.tableTop=t(this.s.dt.nTable).offset().top,this.s.tableBottom=t(this.s.dt.nTable).height()+this.s.tableTop,this.s.dt.oFeatures.bServerSide?(clearTimeout(this.s.drawTO),this.s.drawTO=setTimeout(function(){o.s.dt._iDisplayStart=s,o.s.dt.oApi._fnCalculateEnd(o.s.dt),o.s.dt.oApi._fnDraw(o.s.dt)},this.s.serverWait)):(this.s.dt._iDisplayStart=s,this.s.dt.oApi._fnCalculateEnd(this.s.dt),this.s.dt.oApi._fnDraw(this.s.dt)),this.s.trace&&console.log("Scroll forcing redraw - top DT render row: "+s))}},_fnDrawCallback:function(){var s=this,o=this.dom.scroller.scrollTop,e=o+this.s.viewportHeight;this.dom.force.style.height=this.s.rowHeight*this.s.dt.fnRecordsDisplay()+"px";var i=this.s.rowHeight*this.s.dt._iDisplayStart;0===this.s.dt._iDisplayStart?i=0:this.s.dt._iDisplayStart===this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength&&(i=this.s.rowHeight*this.s.dt._iDisplayStart),this.dom.table.style.top=i+"px",this.s.tableTop=i,this.s.tableBottom=t(this.s.dt.nTable).height()+this.s.tableTop,this.s.redrawTop=o-(o-this.s.tableTop)*this.s.boundaryScale,this.s.redrawBottom=o+(this.s.tableBottom-e)*this.s.boundaryScale,this.s.trace&&console.log("Table redraw. Table top: "+i+"px Table bottom: "+this.s.tableBottom+" Scroll boundary top: "+this.s.redrawTop+" Scroll boundary bottom: "+this.s.redrawBottom+" Rows drawn: "+this.s.dt._iDisplayLength),setTimeout(function(){s._fnInfo.call(s)},0),this.s.dt.oFeatures.bStateSave&&null!==this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.iScroller&&(null!==this.s.dt.sAjaxSource&&2==this.s.dt.iDraw||null===this.s.dt.sAjaxSource&&1==this.s.dt.iDraw)&&setTimeout(function(){t(s.dom.scroller).scrollTop(s.s.dt.oLoadedState.iScroller),s.s.redrawTop=s.s.dt.oLoadedState.iScroller-s.s.viewportHeight/2},0)},_fnCalcRowHeight:function(){var s=this.s.dt.nTable.cloneNode(!1),e=t('<div class="'+this.s.dt.oClasses.sWrapper+' DTS"><div class="'+this.s.dt.oClasses.sScrollWrapper+'"><div class="'+this.s.dt.oClasses.sScrollBody+'"></div></div></div>')[0];t(s).append("<tbody><tr><td>&nbsp;</td></tr></tbody>"),t("div."+this.s.dt.oClasses.sScrollBody,e).append(s),o.body.appendChild(e),this.s.rowHeight=t("tbody tr",s).outerHeight(),o.body.removeChild(e)},_fnInfo:function(){if(this.s.dt.oFeatures.bInfo){var s,o=this.s.dt,e=this.dom.scroller.scrollTop,i=this.fnPixelsToRow(e)+1,r=o.fnRecordsTotal(),a=o.fnRecordsDisplay(),l=this.fnPixelsToRow(e+t(this.dom.scroller).height()),n=l>a?a:l,d=o.fnFormatNumber(i),h=o.fnFormatNumber(n),c=o.fnFormatNumber(r),p=o.fnFormatNumber(a);s=0===o.fnRecordsDisplay()&&o.fnRecordsDisplay()==o.fnRecordsTotal()?o.oLanguage.sInfoEmpty+o.oLanguage.sInfoPostFix:0===o.fnRecordsDisplay()?o.oLanguage.sInfoEmpty+" "+o.oLanguage.sInfoFiltered.replace("_MAX_",c)+o.oLanguage.sInfoPostFix:o.fnRecordsDisplay()==o.fnRecordsTotal()?o.oLanguage.sInfo.replace("_START_",d).replace("_END_",h).replace("_TOTAL_",p)+o.oLanguage.sInfoPostFix:o.oLanguage.sInfo.replace("_START_",d).replace("_END_",h).replace("_TOTAL_",p)+" "+o.oLanguage.sInfoFiltered.replace("_MAX_",o.fnFormatNumber(o.fnRecordsTotal()))+o.oLanguage.sInfoPostFix;var f=o.aanFeatures.i;if("undefined"!=typeof f)for(var u=0,w=f.length;w>u;u++)t(f[u]).html(s)}}},e.oDefaults={trace:!1,rowHeight:"auto",serverWait:200,displayBuffer:9,boundaryScale:.5,loadingIndicator:!1},e.prototype.CLASS="Scroller",e.VERSION="1.1.0",e.prototype.VERSION=e.VERSION,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.9.0")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var s="undefined"==typeof t.oInit.oScroller?{}:t.oInit.oScroller,o=new e(t,s);return o.dom.wrapper},cFeature:"S",sFeature:"Scroller"}):alert("Warning: Scroller requires DataTables 1.9.0 or greater - www.datatables.net/download"),t.fn.dataTable.Scroller=e}(jQuery,window,document);